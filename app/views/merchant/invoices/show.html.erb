<div class="">
  <h1 class="little_esty_shop">Little Esty Shop</h1>
</div>

<div class="nav_bar_wrapper">
  <h1 class="title_name"><%= @merchant.name %></h1>
  <div class="nav_bar_links">
    <p class="nav_bar_links_inline"><%= button_to "Dashboard", "/merchants/#{@merchant.id}/dashboard", method: :get %></p>
    <p class="nav_bar_links_inline"><%= button_to "My Items", "/merchants/#{@merchant.id}/items", method: :get %></p>
    <p class="nav_bar_links_inline"><%= button_to "My Invoices", "/merchants/#{@merchant.id}/invoices", method: :get %></p>
  </div>
</div>

<h2 class="title_wrapper">Invoice #<%= @invoice.id %></h2>

<h1>Invoice ID: <%= @invoice.id %></h1>
<h3>Invoice Status: <%= @invoice.status %></h3>
<h4>Customer Last, First: <%= @customer.last_name %>, <%= @customer.first_name %></h4>
<h5>Created On: <%= @invoice.created_at.strftime('%A, %B %d, %Y') %></h5>

<p style="font-weight: bold">Total Revenue: $<%= number_with_precision((@total_revenue.to_f / 100), precision: 2, delimiter: ',') %></p>
<p>Total Revenue with Bulk Discount: $<%= number_with_precision(@total_discounted_revenue, precision: 2, delimiter: ',') %></p>
<p>Note: If total revenue and total revenue with bulk discount are the same, then there were no bulk discount applied.</p>

<% @invoice_items.each do |item| %>
  <p>Name: <%= Item.where('id = ?', item.item_id).first.name %></p>
  <p>Quantity Ordered: <%= item.quantity %></p>
  <p>Price Sold For: $<%= number_with_precision((item.unit_price.to_f / 100), precision: 2, delimiter: ',') %></p>
  <%= form_with url: "/merchants/#{@merchant.id}/invoices/#{@invoice.id}?item_id=#{item.id}", method: :patch, local: true do |f| %>
    <p>Status: <%= f.select :status, ['pending','packaged', 'shipped'], selected: item.status  %>
    <%= f.submit 'Update Status' %></p>
  <% end %>
<% end %>
